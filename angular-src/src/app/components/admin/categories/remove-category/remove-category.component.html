<div class=background>

  <div class=container>
    <h1 class=title>Remove Collection</h1>
    <div class="top-div">
      <button class="white-button top-button" (click)="toggleInactiveGroups()">{{buttonText}} Deactivated
        Collections</button>



      <div *ngFor="let col of sortedGroups; index as i">

        <div class="collection-container Collection">

          <div class=button-container *ngIf="sortedGroups[i].categories.length; else elseBlock">
            <button id="{{col.collection.stub}}" class='expand-button'
              (click)="toggleCollection(col, $event.target.id)">

              <ng-template [ngIf]="col.isOpen">
                  <mat-icon id="{{col.collection.stub}}">expand_more</mat-icon>
                </ng-template>
  
                <ng-template [ngIf]="!col.isOpen">
                  <mat-icon id="{{col.collection.stub}}">chevron_right</mat-icon>
                </ng-template>

            </button>
          </div>
          <ng-template #elseBlock>
            <div class=button-blank-space></div>
          </ng-template>



          <div class=image-container>
            <div class=overlay></div>
            <img src={{col.collection.image}}>
            <p class=name>{{col.collection.name}}</p>
            <button class=select-button (click)=onSubmit(col.collection._id)></button>
          </div>
          <ng-template [ngIf]="!sortedGroups[i].categories.length">
              <button class=delete-button (click)=delete(col.collection._id)>Delete</button>
            </ng-template>
          <button class=select-button (click)=onSubmit(col.collection._id)>Deactivate</button>
         
        </div>

        <div class="dropdown-content {{col.collection.stub}}">
          <div class="category" *ngFor="let cat of sortedGroups[i].categories; index as j">
            <div class="collection-container Category">
              <div class=button-container *ngIf="sortedGroups[i].categories[j].subcategories.length; else elseBlock">
                <button id="{{cat.category.stub}}" class='expand-button'
                  (click)="toggleCategory(cat, $event.target.id)">

                  <ng-template [ngIf]="cat.isOpen">
                      <mat-icon id="{{cat.category.stub}}">expand_more</mat-icon>
                    </ng-template>
  
                    <ng-template [ngIf]="!cat.isOpen">
                      <mat-icon id="{{cat.category.stub}}">chevron_right</mat-icon>
                    </ng-template>

                </button>
              </div>
              <ng-template #elseBlock>
                <div class=button-blank-space></div>
              </ng-template>


              <div class=image-container>
                <div class=overlay></div>
                <img src={{cat.category.image}}>
                <p class=name>{{cat.category.name}}</p>
                <button class=select-button (click)=onSubmit(cat.category._id)></button>
              </div>
              <ng-template [ngIf]="!sortedGroups[i].categories[j].subcategories.length">
                  <button class=delete-button (click)=delete(cat.category._id)>Delete</button>
                </ng-template>
              <button class=select-button (click)=onSubmit(cat.category._id)>Deactivate</button>
              
            </div>

            <div class="subcategory {{cat.category.stub}}" *ngFor="let sub of cat.subcategories">
              <div class="collection-container Subcategory">
                <div class=button-blank-space></div>

                <div class=image-container>
                  <div class=overlay></div>
                  <img src={{sub.image}}>
                  <p class=name>{{sub.name}}</p>
                  <button class=select-button (click)=onSubmit(sub._id)></button>
                </div>
                <button class=delete-button (click)=delete(sub._id)>Delete</button>

                <button class=select-button (click)=onSubmit(sub._id)>Deactivate</button>
              </div>
            </div>
          </div>
        </div>

      </div>
      <!--
      <div class="collection-container {{col.type}}" *ngFor="let col of sortedGroups; index as i">
        <ng-template [ngIf]="col.type!=='Collection'">
          <div class=icon-container>
            <mat-icon [style.visibility]="(sortedGroups[i-1].type===col.type) ? 'hidden' : 'visible'">subdirectory_arrow_right</mat-icon>
          </div>
        </ng-template>
        <div class=image-container>

          <div class=overlay></div>
          <img src={{col.image}}>
          <p class=name>{{col.name}}</p>
          <button class=select-button (click)=onSubmit(i)></button>
        </div>
        <ng-template
          [ngIf]="!((col.type==='Collection' && sortedGroups[i+1].type==='Category') || (col.type==='Category' && sortedGroups[i+1].type==='Subcategory'))">
          <button class=delete-button (click)=delete(i)>Delete Forever</button>
        </ng-template>

      </div>
    -->
    </div>

  </div>


</div>